# Request a Consultation API - Test Guide

## Endpoint
POST /api/consultations

## Headers
Content-Type: application/json

## Valid Request Body Examples

### Example 1: General Consultation
```json
{
  "fullName": "John Smith",
  "phone": "+1234567890",
  "email": "john.smith@example.com",
  "consultationType": "general",
  "message": "I would like to schedule a general consultation to discuss my investment options and get advice on portfolio diversification."
}
```

### Example 2: Financial Consultation
```json
{
  "fullName": "Sarah Johnson",
  "phone": "+1987654321",
  "email": "sarah.johnson@email.com",
  "consultationType": "financial",
  "message": "I need professional financial advice regarding retirement planning and tax optimization strategies for my investments."
}
```

### Example 3: Psychology Consultation
```json
{
  "fullName": "Michael Brown",
  "phone": "+1555123456",
  "email": "michael.brown@test.org",
  "consultationType": "psychology",
  "message": "I'm experiencing stress related to trading and would like psychological support to develop better coping mechanisms and emotional regulation skills."
}
```

### Example 4: Other Consultation
```json
{
  "fullName": "Emma Wilson",
  "phone": "+1444987654",
  "email": "emma.wilson@domain.net",
  "consultationType": "other",
  "message": "I have some questions about your platform features and would like a personalized demonstration of how to use the advanced analytics tools."
}
```

## Form-Data Keys for Postman Testing

When using Postman with form-data:

### Required Fields:
- `fullName` (text)
- `phone` (text)
- `email` (text)
- `consultationType` (text) - must be one of: general, financial, psychology, other
- `message` (text)

### Example Form-Data Setup:
```
fullName: John Smith
phone: +1234567890
email: john.smith@example.com
consultationType: general
message: I would like to schedule a consultation to discuss investment opportunities.
```

## Expected Success Response (201 Created)
```json
{
  "success": true,
  "message": "Consultation request submitted successfully",
  "data": {
    "id": "67890abcdef1234567890abc",
    "fullName": "John Smith",
    "phone": "+1234567890",
    "email": "john.smith@example.com",
    "consultationType": "general",
    "message": "I would like to schedule a consultation to discuss investment opportunities.",
    "createdAt": "2026-01-18T22:15:30.123Z",
    "updatedAt": "2026-01-18T22:15:30.123Z"
  }
}
```

## Error Responses

### 400 Bad Request - Missing Fields
```json
{
  "success": false,
  "message": "Full name is required"
}
```

### 400 Bad Request - Invalid Email
```json
{
  "success": false,
  "message": "Please provide a valid email address"
}
```

### 400 Bad Request - Invalid Consultation Type
```json
{
  "success": false,
  "message": "Consultation type must be one of: general, financial, psychology, other"
}
```

### 400 Bad Request - Validation Errors
```json
{
  "success": false,
  "message": "Validation Error",
  "details": [
    "Full name must be at least 2 characters long",
    "Message must be at least 10 characters long"
  ]
}
```

### 500 Internal Server Error
```json
{
  "success": false,
  "message": "Internal server error",
  "details": "Database connection failed"
}
```

## Validation Rules

1. **fullName**: Required, minimum 2 characters
2. **phone**: Required
3. **email**: Required, must be valid email format
4. **consultationType**: Required, must be one of: general, financial, psychology, other
5. **message**: Required, minimum 10 characters

All string fields are automatically trimmed of whitespace.
Email is converted to lowercase for consistency.
Timestamps (createdAt, updatedAt) are automatically generated by MongoDB.